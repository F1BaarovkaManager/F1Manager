<!DOCTYPE html>
<html>
<head>
    <title>F1 Baarovka Manager</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Import F1-like font */
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f2f2f2;
            color: #333;
            padding-bottom: 70px; /* Prostor pro fixn√≠ panel */
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
        }
        
        header {
            background-color: #15151e;
            color: white;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 5px solid #e10600;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        h1 {
            margin: 0;
            font-size: 28px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        h2 {
            color: #e10600;
            border-bottom: 2px solid #e10600;
            padding-bottom: 10px;
            margin-top: 25px;
            font-size: 22px;
            letter-spacing: 0.5px;
        }
        
        /* Z√°kladn√≠ tabulky */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 25px;
            background-color: white;
            box-shadow: 0 1px 5px rgba(0,0,0,0.15);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background-color: #15151e;
            color: white;
            text-transform: uppercase;
            font-size: 0.9em;
            letter-spacing: 0.5px;
        }
        
        tr:hover {
            background-color: #f9f9f9;
        }
        
        /* Logo t√Ωmu v tabulce - kulat√© */
        .team-logo {
            width: 40px;
            height: 40px;
            object-fit: cover;
            margin-right: 10px;
            vertical-align: middle;
            border-radius: 50%;
            border: 2px solid #e10600;
            background: white;
            padding: 2px;
        }
        
        .team-cell {
            display: flex;
            align-items: center;
        }
        
        /* Logo t√Ωmu u jezdce v tabulce - mal√© kulat√© */
        .driver-team-logo {
            width: 25px;
            height: 25px;
            object-fit: cover;
            border-radius: 50%;
            border: 1px solid #ddd;
            background: white;
            padding: 1px;
            margin-right: 8px;
            vertical-align: middle;
        }
        
        .driver-cell {
            display: flex;
            align-items: center;
        }
        
        /* V√Ωbƒõr oblast */
        .selection-area {
            margin-top: 20px;
            padding: 20px;
            background-color: white;
            box-shadow: 0 1px 5px rgba(0,0,0,0.15);
            border-radius: 8px;
            position: sticky;
            top: 20px;
        }
        
        /* Rozpoƒçet */
        .budget {
            background-color: #15151e;
            color: white;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .budget div {
            margin: 8px 0;
            font-size: 1.1em;
        }
        
        /* Progress bar */
        .progress-container {
            width: 100%;
            background-color: #ddd;
            margin: 20px 0;
            height: 24px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
        }
        
        .progress-bar {
            height: 24px;
            background-color: #e10600;
            color: white;
            text-align: center;
            line-height: 24px;
            font-weight: bold;
            transition: width 0.5s ease;
        }
        
        /* Zpr√°vy */
        .error {
            background-color: #d32f2f;
            color: white;
            padding: 12px 15px;
            margin: 15px 0;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-weight: bold;
        }
        
        .success {
            background-color: #388e3c;
            color: white;
            padding: 12px 15px;
            margin: 15px 0;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-weight: bold;
        }
        
        /* Tlaƒç√≠tka */
        button {
            background-color: #e10600;
            border: none;
            color: white;
            padding: 12px 20px;
            cursor: pointer;
            border-radius: 8px;
            margin-right: 10px;
            margin-bottom: 10px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.15);
            transition: all 0.2s ease;
        }
        
        button:hover {
            background-color: #c00500;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* Karty jezdc≈Ø a t√Ωm≈Ø s fotkami na pozad√≠ */
        .selected-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        
        .selected-card {
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            background-color: white;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            position: relative;
            height: 200px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        
        .selected-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .selected-card h4 {
            display: none;
        }
        
        .selected-card .card-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.7), transparent);
            color: white;
            padding: 20px 10px 10px;
            z-index: 2;
        }
        
        .selected-card p {
            margin: 5px 0;
            padding: 0;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
        }
        
        /* Skr√Ωt p≈Øvodn√≠ fotky, pou≈æ√≠v√°me background-image */
        .card-photo, .car-photo {
            display: none;
        }
        
        /* Fotka profilu pro karty - upraveno pro skuteƒçn√© fotky */
        .card-photo {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            margin: 15px auto 10px;
            position: relative;
            overflow: hidden;
            border: 3px solid #e10600;
            background: linear-gradient(135deg, #15151e, #e10600);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .card-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        
        .card-photo .fallback-avatar {
            color: white;
            font-weight: bold;
            font-size: 1.2em;
            display: none;
        }
        
        /* Fotka auta pro t√Ωmov√© karty */
        .car-photo {
            width: 120px;
            height: auto;
            margin: 15px auto 10px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        
        .car-photo img {
            width: 100%;
            height: auto;
            object-fit: contain;
            border-radius: 8px;
        }
        
        .price-tag {
            color: #e10600;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .flag {
            margin-right: 5px;
            font-size: 1.2em;
        }
        
        /* Fin√°ln√≠ n√°hled s vylep≈°en√Ωmi kartami */
        .preview-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.8);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }
        
        .preview-content {
            background-color: white;
            max-width: 900px;
            margin: 40px auto;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }
        
        .preview-header {
            background-color: #15151e;
            color: white;
            padding: 20px;
            text-align: center;
            border-bottom: 5px solid #e10600;
        }
        
        .preview-header h2 {
            margin: 0;
            color: white;
            border: none;
            padding: 0;
            font-size: 1.8em;
        }
        
        .preview-body {
            padding: 30px;
        }
        
        .preview-section {
            margin-bottom: 25px;
        }
        
        .preview-section h3 {
            color: #e10600;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
            margin-top: 0;
        }
        
        /* IMPROVED PREVIEW GRID - Better spacing and layout */
        .preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 24px 18px;
            margin-top: 18px;
            justify-items: center;
        }
        
        /* IMPROVED PREVIEW CARDS - Better dimensions and readability */
        .preview-card {
            position: relative;
            width: 280px;
            height: 140px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
            border: 2px solid #e10600;
            margin: 0 auto;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .preview-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }
        
        /* IMPROVED TEXT OVERLAY - Better contrast and readability */
        .preview-card-content {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 16px 14px 12px 14px;
            background: linear-gradient(to top, rgba(0,0,0,0.85), rgba(0,0,0,0.1) 65%);
            color: #fff !important;
        }
        
        .preview-card-content .driver-name,
        .preview-card .driver-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 4px;
            color: #fff !important;
            text-shadow: 0 2px 8px rgba(0,0,0,0.8);
            line-height: 1.2;
        }
        
        .preview-card-content .price-tag,
        .preview-card .price-tag {
            font-size: 1.1em;
            color: #ffeb3b !important;
            font-weight: bold;
            margin-top: 2px;
            text-shadow: 0 1px 4px rgba(0,0,0,0.6);
        }
        
        /* Skr√Ωt star√Ω kontejner pro fotky */
        .preview-card-photo {
            display: none;
        }
        
        .preview-photo .fallback-avatar {
            color: white;
            font-weight: bold;
            font-size: 1.5em;
            display: none;
        }
        
        /* Velk√° fotka auta pro n√°hled */
        .preview-car-photo {
            width: 160px;
            height: auto;
            margin: 0 auto 15px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .preview-car-photo img {
            width: 100%;
            height: auto;
            object-fit: contain;
            border-radius: 10px;
        }
        
        .preview-footer {
            background-color: #f5f5f5;
            padding: 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-between;
        }
        
        .preview-budget-item {
            text-align: center;
            flex: 1;
        }
        
        .preview-budget-item .label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }
        
        .preview-budget-item .value {
            font-size: 1.3em;
            font-weight: bold;
        }
        
        .preview-budget-item .value.total {
            color: #15151e;
        }
        
        .preview-budget-item .value.used {
            color: #e10600;
        }
        
        .preview-budget-item .value.remaining {
            color: #388e3c;
        }
        
        .preview-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: #e10600;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .preview-close:hover {
            background-color: #c00500;
        }
        
        /* Fixn√≠ panel dole */
        .fixed-budget-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #15151e;
            color: white;
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
            z-index: 900;
        }
        
        .budget-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex: 1;
        }
        
        .budget-item {
            text-align: center;
            padding: 0 10px;
        }
        
        .budget-item .label {
            font-size: 0.8em;
            opacity: 0.8;
            margin-bottom: 3px;
        }
        
        .budget-item .value {
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .scroll-top {
            background-color: #e10600;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin-left: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        @media (min-width: 768px) {
            .layout {
                display: flex;
                gap: 25px;
            }
            
            .layout-left {
                flex: 0 0 60%;
            }
            
            .layout-right {
                flex: 0 0 38%;
            }
        }
        
        /* Mobiln√≠ optimalizace */
        @media (max-width: 767px) {
            header {
                padding: 15px;
            }
            
            h1 {
                font-size: 22px;
            }
            
            .container {
                padding: 10px;
            }
            
            table {
                font-size: 0.9em;
            }
            
            th, td {
                padding: 10px 8px;
            }
            
            .selected-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            /* MOBILE PREVIEW IMPROVEMENTS */
            .preview-content {
                max-height: 90vh;
                overflow-y: auto;
                margin: 10px auto;
                max-width: 95%;
            }
            
            .preview-container {
                overflow-y: hidden;
                padding: 10px;
            }
            
            .preview-body {
                padding: 15px;
            }
            
            .preview-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            
            .preview-card {
                width: 100%;
                height: 100px;
                border-radius: 8px;
                max-width: none;
            }
            
            .preview-card-content {
                padding: 8px 10px;
            }
            
            .preview-card-content .driver-name,
            .preview-card .driver-name {
                font-size: 1em;
                margin-bottom: 2px;
            }
            
            .preview-card-content .price-tag,
            .preview-card .price-tag {
                font-size: 0.9em;
                margin-top: 0;
            }
            
            /* Mobiln√≠ footer pro n√°hled */
            .preview-footer {
                flex-direction: row;
                gap: 5px;
                padding: 15px 10px;
                justify-content: space-around;
            }
            
            .preview-budget-item {
                padding: 8px 5px;
                border-bottom: none;
                border-right: 1px solid #ddd;
                flex: 1;
                text-align: center;
            }
            
            .preview-budget-item:last-child {
                border-right: none;
            }
            
            .preview-budget-item .label {
                font-size: 0.7em;
                margin-bottom: 3px;
            }
            
            .preview-budget-item .value {
                font-size: 1em;
            }
            
            /* Zvƒõt≈°en√≠ interaktivn√≠ch prvk≈Ø pro mobiln√≠ dotyky */
            input[type="checkbox"], input[type="radio"] {
                transform: scale(1.5);
                margin: 0 5px;
                width: 24px;
                height: 24px;
            }
            
            button {
                padding: 12px 15px;
                width: 100%;
                margin: 8px 0;
                font-size: 0.9em;
            }
            
            .preview-close {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }
            
            /* Vylep≈°en√≠ pro fixn√≠ panel na mobilech */
            .fixed-budget-panel {
                padding: 8px;
            }
            
            .budget-item {
                padding: 0 5px;
            }
            
            .budget-item .label {
                font-size: 0.7em;
            }
            
            .budget-item .value {
                font-size: 0.9em;
            }
            
            /* Optimalizace rozlo≈æen√≠ pro telefony na v√Ω≈°ku */
            .selection-area {
                position: relative;
                top: 0;
                margin-top: 15px;
                padding: 15px;
            }
            
            /* Odstranƒõn√≠ margin-right pro tlaƒç√≠tka na mal√Ωch obrazovk√°ch */
            button {
                margin-right: 0;
            }
            
            /* Zlep≈°en√≠ clickable oblasti pro mobiln√≠ za≈ô√≠zen√≠ */
            tr {
                cursor: pointer;
            }
            
            /* Zarovn√°n√≠ checkbox≈Ø na mobilech */
            td:last-child {
                text-align: center;
            }
            
            .card-photo, .preview-photo {
                width: 50px;
                height: 50px;
            }
            
            /* Zmen≈°en√≠ loga na mobilech */
            .team-logo {
                width: 30px;
                height: 30px;
            }
            
            .driver-team-logo {
                width: 20px;
                height: 20px;
            }
            
            /* Mobiln√≠ karty v n√°hledu - kompaktn√≠ layout */
            .preview-section {
                margin-bottom: 20px;
            }
            
            .preview-section h3 {
                font-size: 1.1em;
                margin-bottom: 10px;
            }
            
            /* Mobiln√≠ scroll do n√°hledu */
            .preview-container {
                display: flex;
                align-items: flex-start;
                padding-top: 20px;
            }
            
            /* Zajistit, ≈æe v≈°echno je vidƒõt */
            .preview-body {
                max-height: none;
            }
            
            /* Flag optimalizace pro mobil */
            .flag {
                font-size: 1em;
                margin-right: 4px;
            }
        }
        
        /* F1 TOTAL CARD EXTRA STYLING */
        .f1-total-card {
            position: relative;
            overflow: hidden;
        }
        
        .f1-total-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* STATS TAB STYLING */
        .stats-tab {
            border-radius: 8px 8px 0 0;
            transition: all 0.2s ease;
        }
        
        .stats-tab:hover {
            transform: translateY(-2px);
        }
        
        .stats-tab.active {
            background: #e10600 !important;
            color: white !important;
        }
        
        /* TABULKY STATISTIK STYLING */
        #fantasy-drivers-table th,
        #fantasy-teams-table th {
            background-color: #15151e;
            color: white;
            padding: 8px 12px;
            text-align: left;
            text-transform: uppercase;
            font-size: 0.8em;
            font-weight: bold;
            border-bottom: 1px solid #333;
        }
        
        #fantasy-drivers-table td,
        #fantasy-teams-table td {
            padding: 8px 12px;
            border-bottom: 1px solid #eee;
            text-align: center;
        }
        
        #fantasy-drivers-table td:first-child,
        #fantasy-teams-table td:first-child {
            text-align: left;
            font-weight: bold;
        }
        
        #fantasy-drivers-table td:last-child,
        #fantasy-teams-table td:last-child {
            background-color: #fff9e6;
            font-weight: bold;
            color: #e10600;
        }
        
        /* Zv√Ωraznƒõn√≠ vybran√Ωch ≈ô√°dk≈Ø */
        tr.selected {
            background-color: #ffecec;
        }
        
        /* Styl pro ≈ô√°dky p≈ôi kliknut√≠ */
        tr:active {
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <header>
        <h1>F1 Baarovka Manager</h1>
    </header>
    
    <div class="container">
        <div class="layout">
            <div class="layout-left">
                <h2>T√Ωmy</h2>
                <table id="teamsTable">
                    <tr>
                        <th>T√Ωm</th>
                        <th>Cena</th>
                        <th>Vybrat</th>
                    </tr>
                    <tr data-team="Red Bull Racing" data-price="6.5" data-flag="üá¶üáπ">
                        <td>
                            <div class="team-cell">
                                <img src="T√Ωmy loga/2025redbullracinglogowhitefr.avif" alt="Red Bull Racing" class="team-logo">
                                <div>
                                    <span class="flag">üá¶üáπ</span> Red Bull Racing
                                </div>
                            </div>
                        </td>
                        <td><span class="price-tag">6.5 mil.</span></td>
                        <td><input type="radio" name="team" data-name="Red Bull Racing" data-price="6.5" data-flag="üá¶üáπ"></td>
                    </tr>
                    <tr data-team="McLaren" data-price="7.5" data-flag="üá¨üáß">
                        <td>
                            <div class="team-cell">
                                <img src="T√Ωmy loga/2025mclarenlogowhitefr.avif" alt="McLaren" class="team-logo">
                                <div>
                                    <span class="flag">üá¨üáß</span> McLaren
                                </div>
                            </div>
                        </td>
                        <td><span class="price-tag">7.5 mil.</span></td>
                        <td><input type="radio" name="team" data-name="McLaren" data-price="7.5" data-flag="üá¨üáß"></td>
                    </tr>
                    <tr data-team="Ferrari" data-price="7.0" data-flag="üáÆüáπ">
                        <td>
                            <div class="team-cell">
                                <img src="T√Ωmy loga/2025ferrarilogowhitefr.avif" alt="Ferrari" class="team-logo">
                                <div>
                                    <span class="flag">üáÆüáπ</span> Ferrari
                                </div>
                            </div>
                        </td>
                        <td><span class="price-tag">7.0 mil.</span></td>
                        <td><input type="radio" name="team" data-name="Ferrari" data-price="7.0" data-flag="üáÆüáπ"></td>
                    </tr>
                    <tr data-team="Mercedes" data-price="6.0" data-flag="üá©üá™">
                        <td>
                            <div class="team-cell">
                                <img src="T√Ωmy loga/2025mercedeslogowhitefr.avif" alt="Mercedes" class="team-logo">
                                <div>
                                    <span class="flag">üá©üá™</span> Mercedes
                                </div>
                            </div>
                        </td>
                        <td><span class="price-tag">6.0 mil.</span></td>
                        <td><input type="radio" name="team" data-name="Mercedes" data-price="6.0" data-flag="üá©üá™"></td>
                    </tr>
                    <tr data-team="Aston Martin" data-price="3.5" data-flag="üá¨üáß">
                        <td>
                            <div class="team-cell">
                                <img src="T√Ωmy loga/2025astonmartinlogowhitefr.avif" alt="Aston Martin" class="team-logo">
                                <div>
                                    <span class="flag">üá¨üáß</span> Aston Martin
                                </div>
                            </div>
                        </td>
                        <td><span class="price-tag">3.5 mil.</span></td>
                        <td><input type="radio" name="team" data-name="Aston Martin" data-price="3.5" data-flag="üá¨üáß"></td>
                    </tr>
                    <tr data-team="Alpine" data-price="3.5" data-flag="üá´üá∑">
                        <td>
                            <div class="team-cell">
                                <img src="T√Ωmy loga/2025alpinelogowhitefr.avif" alt="Alpine" class="team-logo">
                                <div>
                                    <span class="flag">üá´üá∑</span> Alpine
                                </div>
                            </div>
                        </td>
                        <td><span class="price-tag">3.5 mil.</span></td>
                        <td><input type="radio" name="team" data-name="Alpine" data-price="3.5" data-flag="üá´üá∑"></td>
                    </tr>
                    <tr data-team="Visa Cash App RB" data-price="3.0" data-flag="üáÆüáπ">
                        <td>
                            <div class="team-cell">
                                <img src="T√Ωmy loga/2025racingbullslogowhitefr.avif" alt="Racing Bulls" class="team-logo">
                                <div>
                                    <span class="flag">üáÆüáπ</span> Visa Cash App RB
                                </div>
                            </div>
                        </td>
                        <td><span class="price-tag">3.0 mil.</span></td>
                        <td><input type="radio" name="team" data-name="Visa Cash App RB" data-price="3.0" data-flag="üáÆüáπ"></td>
                    </tr>
                    <tr data-team="Williams" data-price="4.0" data-flag="üá¨üáß">
                        <td>
                            <div class="team-cell">
                                <img src="T√Ωmy loga/2025williamslogowhitefr.avif" alt="Williams" class="team-logo">
                                <div>
                                    <span class="flag">üá¨üáß</span> Williams
                                </div>
                            </div>
                        </td>
                        <td><span class="price-tag">4.0 mil.</span></td>
                        <td><input type="radio" name="team" data-name="Williams" data-price="4.0" data-flag="üá¨üáß"></td>
                    </tr>
                    <tr data-team="Haas" data-price="3.0" data-flag="üá∫üá∏">
                        <td>
                            <div class="team-cell">
                                <img src="T√Ωmy loga/2025haaslogowhitefr.avif" alt="Haas" class="team-logo">
                                <div>
                                    <span class="flag">üá∫üá∏</span> Haas
                                </div>
                            </div>
                        </td>
                        <td><span class="price-tag">3.0 mil.</span></td>
                        <td><input type="radio" name="team" data-name="Haas" data-price="3.0" data-flag="üá∫üá∏"></td>
                    </tr>
                    <tr data-team="Sauber" data-price="1.5" data-flag="üá®üá≠">
                        <td>
                            <div class="team-cell">
                                <img src="T√Ωmy loga/2025kicksauberlogowhitefr.avif" alt="Kick Sauber" class="team-logo">
                                <div>
                                    <span class="flag">üá®üá≠</span> Sauber
                                </div>
                            </div>
                        </td>
                        <td><span class="price-tag">1.5 mil.</span></td>
                        <td><input type="radio" name="team" data-name="Sauber" data-price="1.5" data-flag="üá®üá≠"></td>
                    </tr>
                </table>
                
                <h2>Jezdci</h2>
                <table id="driversTable">
                    <tr>
                        <th>Jezdec</th>
                        <th>Cena</th>
                        <th>Vybrat</th>
                    </tr>
                    <tr data-driver="Verstappen" data-price="7.5" data-flag="üá≥üá±">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025redbullracinglogowhitefr.avif" alt="Red Bull Racing" class="driver-team-logo">
                                Verstappen
                            </div>
                        </td>
                        <td><span class="price-tag">7.5 mil.</span></td>
                        <td><input type="checkbox" data-name="Verstappen" data-price="7.5" data-flag="üá≥üá±"></td>
                    </tr>
                    <tr data-driver="Tsunoda" data-price="5.0" data-flag="üáØüáµ">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025redbullracinglogowhitefr.avif" alt="Red Bull Racing" class="driver-team-logo">
                                Tsunoda
                            </div>
                        </td>
                        <td><span class="price-tag">5.0 mil.</span></td>
                        <td><input type="checkbox" data-name="Tsunoda" data-price="5.0" data-flag="üáØüáµ"></td>
                    </tr>
                    <tr data-driver="Norris" data-price="8.0" data-flag="üá¨üáß">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025mclarenlogowhitefr.avif" alt="McLaren" class="driver-team-logo">
                                Norris
                            </div>
                        </td>
                        <td><span class="price-tag">8.0 mil.</span></td>
                        <td><input type="checkbox" data-name="Norris" data-price="8.0" data-flag="üá¨üáß"></td>
                    </tr>
                    <tr data-driver="Piastri" data-price="6.5" data-flag="üá¶üá∫">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025mclarenlogowhitefr.avif" alt="McLaren" class="driver-team-logo">
                                Piastri
                            </div>
                        </td>
                        <td><span class="price-tag">6.5 mil.</span></td>
                        <td><input type="checkbox" data-name="Piastri" data-price="6.5" data-flag="üá¶üá∫"></td>
                    </tr>
                    <tr data-driver="Leclerc" data-price="7.0" data-flag="üá≤üá®">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025ferrarilogowhitefr.avif" alt="Ferrari" class="driver-team-logo">
                                Leclerc
                            </div>
                        </td>
                        <td><span class="price-tag">7.0 mil.</span></td>
                        <td><input type="checkbox" data-name="Leclerc" data-price="7.0" data-flag="üá≤üá®"></td>
                    </tr>
                    <tr data-driver="Hamilton" data-price="7.0" data-flag="üá¨üáß">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025ferrarilogowhitefr.avif" alt="Ferrari" class="driver-team-logo">
                                Hamilton
                            </div>
                        </td>
                        <td><span class="price-tag">7.0 mil.</span></td>
                        <td><input type="checkbox" data-name="Hamilton" data-price="7.0" data-flag="üá¨üáß"></td>
                    </tr>
                    <tr data-driver="Russel" data-price="6.5" data-flag="üá¨üáß">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025mercedeslogowhitefr.avif" alt="Mercedes" class="driver-team-logo">
                                Russel
                            </div>
                        </td>
                        <td><span class="price-tag">6.5 mil.</span></td>
                        <td><input type="checkbox" data-name="Russel" data-price="6.5" data-flag="üá¨üáß"></td>
                    </tr>
                    <tr data-driver="Antonelli" data-price="5.0" data-flag="üáÆüáπ">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025mercedeslogowhitefr.avif" alt="Mercedes" class="driver-team-logo">
                                Antonelli
                            </div>
                        </td>
                        <td><span class="price-tag">5.0 mil.</span></td>
                        <td><input type="checkbox" data-name="Antonelli" data-price="5.0" data-flag="üáÆüáπ"></td>
                    </tr>
                    <tr data-driver="Alonso" data-price="4.0" data-flag="üá™üá∏">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025astonmartinlogowhitefr.avif" alt="Aston Martin" class="driver-team-logo">
                                Alonso
                            </div>
                        </td>
                        <td><span class="price-tag">4.0 mil.</span></td>
                        <td><input type="checkbox" data-name="Alonso" data-price="4.0" data-flag="üá™üá∏"></td>
                    </tr>
                    <tr data-driver="Stroll" data-price="3.0" data-flag="üá®üá¶">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025astonmartinlogowhitefr.avif" alt="Aston Martin" class="driver-team-logo">
                                Stroll
                            </div>
                        </td>
                        <td><span class="price-tag">3.0 mil.</span></td>
                        <td><input type="checkbox" data-name="Stroll" data-price="3.0" data-flag="üá®üá¶"></td>
                    </tr>
                    <tr data-driver="Gasly" data-price="4.5" data-flag="üá´üá∑">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025alpinelogowhitefr.avif" alt="Alpine" class="driver-team-logo">
                                Gasly
                            </div>
                        </td>
                        <td><span class="price-tag">4.5 mil.</span></td>
                        <td><input type="checkbox" data-name="Gasly" data-price="4.5" data-flag="üá´üá∑"></td>
                    </tr>
                    <tr data-driver="Colapinto" data-price="3.0" data-flag="üá¶üá∑">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025alpinelogowhitefr.avif" alt="Alpine" class="driver-team-logo">
                                Colapinto
                            </div>
                        </td>
                        <td><span class="price-tag">3.0 mil.</span></td>
                        <td><input type="checkbox" data-name="Colapinto" data-price="3.0" data-flag="üá¶üá∑"></td>
                    </tr>
                    <tr data-driver="Albon" data-price="4.0" data-flag="üáπüá≠">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025williamslogowhitefr.avif" alt="Williams" class="driver-team-logo">
                                Albon
                            </div>
                        </td>
                        <td><span class="price-tag">4.0 mil.</span></td>
                        <td><input type="checkbox" data-name="Albon" data-price="4.0" data-flag="üáπüá≠"></td>
                    </tr>
                    <tr data-driver="Sainz" data-price="4.5" data-flag="üá™üá∏">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025williamslogowhitefr.avif" alt="Williams" class="driver-team-logo">
                                Sainz
                            </div>
                        </td>
                        <td><span class="price-tag">4.5 mil.</span></td>
                        <td><input type="checkbox" data-name="Sainz" data-price="4.5" data-flag="üá™üá∏"></td>
                    </tr>
                    <tr data-driver="Lawson" data-price="3.5" data-flag="üá≥üáø">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025racingbullslogowhitefr.avif" alt="Racing Bulls" class="driver-team-logo">
                                Lawson
                            </div>
                        </td>
                        <td><span class="price-tag">3.5 mil.</span></td>
                        <td><input type="checkbox" data-name="Lawson" data-price="3.5" data-flag="üá≥üáø"></td>
                    </tr>
                    <tr data-driver="Hadjar" data-price="2.5" data-flag="üá´üá∑">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025racingbullslogowhitefr.avif" alt="Racing Bulls" class="driver-team-logo">
                                Hadjar
                            </div>
                        </td>
                        <td><span class="price-tag">2.5 mil.</span></td>
                        <td><input type="checkbox" data-name="Hadjar" data-price="2.5" data-flag="üá´üá∑"></td>
                    </tr>
                    <tr data-driver="Ocon" data-price="3.0" data-flag="üá´üá∑">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025haaslogowhitefr.avif" alt="Haas" class="driver-team-logo">
                                Ocon
                            </div>
                        </td>
                        <td><span class="price-tag">3.0 mil.</span></td>
                        <td><input type="checkbox" data-name="Ocon" data-price="3.0" data-flag="üá´üá∑"></td>
                    </tr>
                    <tr data-driver="Bearman" data-price="3.0" data-flag="üá¨üáß">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025haaslogowhitefr.avif" alt="Haas" class="driver-team-logo">
                                Bearman
                            </div>
                        </td>
                        <td><span class="price-tag">3.0 mil.</span></td>
                        <td><input type="checkbox" data-name="Bearman" data-price="3.0" data-flag="üá¨üáß"></td>
                    </tr>
                    <tr data-driver="Hulkenberg" data-price="2.0" data-flag="üá©üá™">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025kicksauberlogowhitefr.avif" alt="Kick Sauber" class="driver-team-logo">
                                Hulkenberg
                            </div>
                        </td>
                        <td><span class="price-tag">2.0 mil.</span></td>
                        <td><input type="checkbox" data-name="Hulkenberg" data-price="2.0" data-flag="üá©üá™"></td>
                    </tr>
                    <tr data-driver="Bortoleto" data-price="1.5" data-flag="üáßüá∑">
                        <td>
                            <div class="driver-cell">
                                <img src="T√Ωmy loga/2025kicksauberlogowhitefr.avif" alt="Kick Sauber" class="driver-team-logo">
                                Bortoleto
                            </div>
                        </td>
                        <td><span class="price-tag">1.5 mil.</span></td>
                        <td><input type="checkbox" data-name="Bortoleto" data-price="1.5" data-flag="üáßüá∑"></td>
                    </tr>
                </table>
            </div>
            
            <div class="layout-right">
                <div class="selection-area">
                    <h2>V√°≈° v√Ωbƒõr</h2>
                    
                    <div class="progress-container">
                        <div id="progress-bar" class="progress-bar" style="width: 0%">0%</div>
                    </div>
                    
                    <div class="budget">
                        <div>Celkov√Ω rozpoƒçet: <strong>30.0 mil.</strong></div>
                        <div>Vyu≈æito: <strong id="used-budget">0.0 mil.</strong></div>
                        <div>Zb√Ωv√°: <strong id="remaining-budget">30.0 mil.</strong></div>
                    </div>
                    
                    <div id="status-message"></div>
                    
                    <h3>Vybran√≠ jezdci</h3>
                    <div class="selected-grid" id="selected-drivers">
                        <!-- Sem budou dynamicky p≈ôid√°v√°ny karty -->
                    </div>
                    
                    <h3>Vybran√Ω t√Ωm</h3>
                    <div id="selected-team">
                        <!-- Sem bude dynamicky p≈ôid√°na karta -->
                    </div>
                    
                    <button id="reset-button">Resetovat</button>
                    <button id="preview-button" disabled>N√°hled</button>
                    <button id="stats-button" style="margin-left:10px;">Statistiky</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Fixn√≠ panel s rozpoƒçtem -->
    <div class="fixed-budget-panel">
        <div class="budget-info">
            <div class="budget-item">
                <div class="label">Rozpoƒçet</div>
                <div class="value">30.0 mil.</div>
            </div>
            <div class="budget-item">
                <div class="label">Vyu≈æito</div>
                <div id="fixed-used-budget" class="value">0.0 mil.</div>
            </div>
            <div class="budget-item">
                <div class="label">Zb√Ωv√°</div>
                <div id="fixed-remaining-budget" class="value">30.0 mil.</div>
            </div>
        </div>
        <div id="scroll-top" class="scroll-top">‚Üë</div>
    </div>
    
    <!-- Fin√°ln√≠ n√°hled sestavy -->
    <div id="preview-container" class="preview-container">
        <div class="preview-content">
            <div class="preview-header">
                <h2>Fin√°ln√≠ sestava</h2>
            </div>
            <div class="preview-body">
                <div class="preview-section">
                    <h3>Vybran√≠ jezdci</h3>
                    <div id="preview-drivers" class="preview-grid">
                        <!-- Sem budou vlo≈æeny karty jezdc≈Ø -->
                    </div>
                </div>
                <div class="preview-section">
                    <h3>Vybran√Ω t√Ωm</h3>
                    <div id="preview-team" class="preview-grid">
                        <!-- Sem bude vlo≈æena karta t√Ωmu -->
                    </div>
                </div>
            </div>
            <div class="preview-footer">
                <div class="preview-budget-item">
                    <div class="label">Celkov√Ω rozpoƒçet</div>
                    <div class="value total">30.0 mil.</div>
                </div>
                <div class="preview-budget-item">
                    <div class="label">Vyu≈æito</div>
                    <div id="preview-used" class="value used">0.0 mil.</div>
                </div>
                <div class="preview-budget-item">
                    <div class="label">Zb√Ωv√°</div>
                    <div id="preview-remaining" class="value remaining">30.0 mil.</div>
                </div>
            </div>
        </div>
        <div id="preview-close" class="preview-close">‚úï</div>
    </div>

    <!-- Fantasy Statistiky Modal -->
    <div id="stats-modal" style="display:none; position:fixed; z-index:1001; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.85); overflow-y: auto; padding: 20px;">
        <div style="max-width:1200px; margin:20px auto; background:#fff; border-radius:10px; overflow:hidden; box-shadow:0 5px 25px rgba(0,0,0,0.4);">
            <div style="background-color: #15151e; color: white; padding: 20px; text-align: center; border-bottom: 5px solid #e10600;">
                <h2 style="margin: 0; color: white; font-size: 1.8em;">üèÜ Fantasy Statistiky ‚Äì Cel√° sez√≥na 2025</h2>
            </div>
            <div style="padding: 30px;">
                <div id="stats-loading" style="text-align: center; padding: 40px; font-size: 1.2em; color: #666;">
                    üèéÔ∏è Naƒç√≠t√°m v√Ωsledky cel√© sez√≥ny...
                </div>
                <div id="stats-content" style="display: none;">
                    <!-- TABY -->
                    <div style="margin-bottom: 20px; border-bottom: 2px solid #eee;">
                        <button id="tab-drivers" class="stats-tab active" style="background: #e10600; color: white; border: none; padding: 12px 24px; margin-right: 5px; cursor: pointer; font-weight: bold;">JEZDCI</button>
                        <button id="tab-teams" class="stats-tab" style="background: #ccc; color: #333; border: none; padding: 12px 24px; cursor: pointer; font-weight: bold;">T√ùMY</button>
                    </div>
                    
                    <!-- TAB JEZDCI -->
                    <div id="stats-tab-drivers">
                        <h3 style="color: #e10600; border-bottom: 2px solid #e10600; padding-bottom: 10px;">üìä Graf v√Ωvoje bod≈Ø - Jezdci</h3>
                        <div style="margin-bottom: 30px; height: 400px; position: relative;">
                            <canvas id="drivers-chart"></canvas>
                        </div>
                        
                        <h3 style="color: #e10600; border-bottom: 2px solid #e10600; padding-bottom: 10px;">üèÅ Tabulka bod≈Ø podle z√°vod≈Ø - Jezdci</h3>
                        <div style="overflow-x: auto; margin-bottom: 30px;">
                            <table id="fantasy-drivers-table" style="width: 100%; border-collapse: collapse; margin-bottom: 25px; background-color: white; box-shadow: 0 1px 5px rgba(0,0,0,0.15); border-radius: 8px; overflow: hidden; font-size: 0.9em;">
                                <thead></thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- TAB T√ùMY -->
                    <div id="stats-tab-teams" style="display: none;">
                        <h3 style="color: #e10600; border-bottom: 2px solid #e10600; padding-bottom: 10px;">üìä Graf v√Ωvoje bod≈Ø - T√Ωmy</h3>
                        <div style="margin-bottom: 30px; height: 400px; position: relative;">
                            <canvas id="teams-chart"></canvas>
                        </div>
                        
                        <h3 style="color: #e10600; border-bottom: 2px solid #e10600; padding-bottom: 10px;">üèéÔ∏è Tabulka bod≈Ø podle z√°vod≈Ø - T√Ωmy</h3>
                        <div style="overflow-x: auto; margin-bottom: 30px;">
                            <table id="fantasy-teams-table" style="width: 100%; border-collapse: collapse; margin-bottom: 25px; background-color: white; box-shadow: 0 1px 5px rgba(0,0,0,0.15); border-radius: 8px; overflow: hidden; font-size: 0.9em;">
                                <thead></thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div style="background-color: #f5f5f5; padding: 20px; border-radius: 8px; margin-top: 20px;">
                        <h4 style="color: #e10600; margin-top: 0;">üìä Pravidla bodov√°n√≠:</h4>
                        <ul style="margin: 10px 0; padding-left: 20px; line-height: 1.6;">
                            <li><strong>Um√≠stƒõn√≠:</strong> 1. m√≠sto = 30b, 2. m√≠sto = 25b, atd.</li>
                            <li><strong>Zlep≈°en√≠ pozice:</strong> +1b za ka≈ædou pozici zlep≈°enou oproti startu</li>
                            <li><strong>Zhor≈°en√≠ pozice:</strong> -1b za ka≈ædou pozici zhor≈°enou oproti startu</li>
                            <li><strong>Fastest Lap:</strong> +5b</li>
                            <li><strong>Pole Position:</strong> +5b</li>
                            <li><strong>Driver of the Day:</strong> +5b (zat√≠m simulov√°no)</li>
                            <li><strong>DNF:</strong> -10b</li>
                            <li><strong>DNS:</strong> -10b</li>
                            <li><strong>DSQ:</strong> -20b</li>
                        </ul>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="document.getElementById('stats-modal').style.display='none'" style="background-color: #e10600; border: none; color: white; padding: 12px 20px; cursor: pointer; border-radius: 8px; font-weight: bold; text-transform: uppercase;">Zav≈ô√≠t</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Z√°kladn√≠ nastaven√≠
        const BUDGET_LIMIT = 30.0;
        let selectedDrivers = [];
        let selectedTeam = null;
        
        // Datab√°ze fotek jezdc≈Ø a t√Ωm≈Ø - va≈°e GitHub struktura
        const driverPhotos = {
            'Verstappen': 'Jezdci/2025redbullracingmaxver01right.avif',
            'Tsunoda': 'Jezdci/2025redbullracingyuktsu01right.avif',
            'Norris': 'Jezdci/2025mclarenlannor01right.avif',
            'Piastri': 'Jezdci/2025mclarenoscpia01right.avif',
            'Leclerc': 'Jezdci/2025ferrarichalec01right.avif',
            'Hamilton': 'Jezdci/2025ferrarilewham01right.avif',
            'Russel': 'Jezdci/2025mercedesgeorus01right.avif',
            'Antonelli': 'Jezdci/2025mercedesandant01right.avif',
            'Alonso': 'Jezdci/2025astonmartinferalo01right.avif',
            'Stroll': 'Jezdci/2025astonmartinlanstr01right.avif',
            'Gasly': 'Jezdci/2025alpinepiegas01right.avif',
            'Colapinto': 'Jezdci/2025alpinefracol01right.avif',
            'Albon': 'Jezdci/2025williamsalealb01right.avif',
            'Sainz': 'Jezdci/2025williamscarsai01right.avif',
            'Lawson': 'Jezdci/2025racingbullslialaw01right.avif',
            'Hadjar': 'Jezdci/2025racingbullsisahad01right.avif',
            'Ocon': 'Jezdci/2025alpinepiegas01right.avif',
            'Bearman': 'Jezdci/2025haasolibea01right.avif',
            'Hulkenberg': 'Jezdci/2025kicksaubernichul01right.avif',
            'Bortoleto': 'Jezdci/2025kicksaubergabbor01right.avif'
        };
        
        const teamLogos = {
            'Red Bull Racing': 'T√Ωmy loga/2025redbullracinglogowhitefr.avif',
            'McLaren': 'T√Ωmy loga/2025mclarenlogowhitefr.avif',
            'Ferrari': 'T√Ωmy loga/2025ferrarilogowhitefr.avif',
            'Mercedes': 'T√Ωmy loga/2025mercedeslogowhitefr.avif',
            'Aston Martin': 'T√Ωmy loga/2025astonmartinlogowhitefr.avif',
            'Alpine': 'T√Ωmy loga/2025alpinelogowhitefr.avif',
            'Visa Cash App RB': 'T√Ωmy loga/2025racingbullslogowhitefr.avif',
            'Williams': 'T√Ωmy loga/2025williamslogowhitefr.avif',
            'Haas': 'T√Ωmy loga/2025haaslogowhitefr.avif',
            'Sauber': 'T√Ωmy loga/2025kicksauberlogowhitefr.avif'
        };
        
        const teamCars = {
            'Red Bull Racing': 'T√Ωmy/2025redbullracingcarright.avif',
            'McLaren': 'T√Ωmy/2025mclarencarright.avif',
            'Ferrari': 'T√Ωmy/2025ferraricarright.avif',
            'Mercedes': 'T√Ωmy/2025mercedescarright.avif',
            'Aston Martin': 'T√Ωmy/2025astonmartincarright.avif',
            'Alpine': 'T√Ωmy/2025alpinecarright.avif',
            'Visa Cash App RB': 'T√Ωmy/2025racingbullscarright.avif',
            'Williams': 'T√Ωmy/2025williamscarright.avif',
            'Haas': 'T√Ωmy/2025haascarright.avif',
            'Sauber': 'T√Ωmy/2025kicksaubercarright.avif'
        };
        
        // Mapov√°n√≠ jezdc≈Ø na t√Ωmy pro zobrazen√≠ log
        const driverTeams = {
            'Verstappen': 'Red Bull Racing',
            'Tsunoda': 'Red Bull Racing',
            'Norris': 'McLaren',
            'Piastri': 'McLaren',
            'Leclerc': 'Ferrari',
            'Hamilton': 'Ferrari',
            'Russel': 'Mercedes',
            'Antonelli': 'Mercedes',
            'Alonso': 'Aston Martin',
            'Stroll': 'Aston Martin',
            'Gasly': 'Alpine',
            'Colapinto': 'Alpine',
            'Albon': 'Williams',
            'Sainz': 'Williams',
            'Lawson': 'Visa Cash App RB',
            'Hadjar': 'Visa Cash App RB',
            'Ocon': 'Haas',
            'Bearman': 'Haas',
            'Hulkenberg': 'Sauber',
            'Bortoleto': 'Sauber'
        };
        
        // Funkce pro vytvo≈ôen√≠ karty s fotkou na pozad√≠
        function createDriverCard(driver, index) {
            const photoUrl = driverPhotos[driver.name];
            return `
                <div class="selected-card" style="background-image: url('${photoUrl}');">
                    <h4>Jezdec ${index + 1}</h4>
                    <div class="card-content">
                        <p><span class="flag">${driver.flag}</span> ${driver.name}</p>
                        <p><span class="price-tag">${Number(driver.price).toFixed(1)} mil.</span></p>
                    </div>
                </div>
            `;
        }
        
        // Funkce pro vytvo≈ôen√≠ karty t√Ωmu s autem na pozad√≠
        function createTeamCard(team) {
            const carUrl = teamCars[team.name];
            return `
                <div class="selected-card" style="background-image: url('${carUrl}');">
                    <h4>T√Ωm</h4>
                    <div class="card-content">
                        <p><span class="flag">${team.flag}</span> ${team.name}</p>
                        <p><span class="price-tag">${Number(team.price).toFixed(1)} mil.</span></p>
                    </div>
                </div>
            `;
        }
        
        // Poƒçkejme na naƒçten√≠ cel√© str√°nky
        document.addEventListener('DOMContentLoaded', function() {
            // Z√≠sk√°n√≠ referenc√≠ na elementy
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            const resetButton = document.getElementById('reset-button');
            const previewButton = document.getElementById('preview-button');
            const previewContainer = document.getElementById('preview-container');
            const previewClose = document.getElementById('preview-close');
            const usedBudgetElement = document.getElementById('used-budget');
            const remainingBudgetElement = document.getElementById('remaining-budget');
            const fixedUsedBudgetElement = document.getElementById('fixed-used-budget');
            const fixedRemainingBudgetElement = document.getElementById('fixed-remaining-budget');
            const progressBarElement = document.getElementById('progress-bar');
            const statusMessageElement = document.getElementById('status-message');
            const selectedDriversElement = document.getElementById('selected-drivers');
            const selectedTeamElement = document.getElementById('selected-team');
            const scrollTopButton = document.getElementById('scroll-top');
            
            // Pro mobiln√≠ za≈ô√≠zen√≠ p≈ôid√°me mo≈ænost kliknout i na cel√Ω ≈ô√°dek
            const tableRows = document.querySelectorAll('#driversTable tr[data-driver], #teamsTable tr[data-team]');
            
            tableRows.forEach(row => {
                row.addEventListener('click', function(e) {
                    // Neklikejme na ≈ô√°dek, pokud jsme klikli p≈ô√≠mo na checkbox nebo radio
                    if (e.target.type === 'checkbox' || e.target.type === 'radio') {
                        return;
                    }
                    
                    // Najdeme input v tomto ≈ô√°dku
                    const input = this.querySelector('input');
                    if (input) {
                        // Toggle input
                        if (input.type === 'checkbox') {
                            input.checked = !input.checked;
                        } else {
                            input.checked = true;
                        }
                        
                        // Vyvol√°me event change pro tento input
                        const event = new Event('change');
                        input.dispatchEvent(event);
                    }
                });
            });
            
            // P≈ôid√°me t≈ô√≠du pro vybran√© ≈ô√°dky
            function updateSelectedRows() {
                // Reset v≈°ech vybran√Ωch ≈ô√°dk≈Ø
                document.querySelectorAll('tr.selected').forEach(row => {
                    row.classList.remove('selected');
                });
                
                // Zv√Ωraznƒõn√≠ ≈ô√°dk≈Ø s vybran√Ωmi jezdci
                selectedDrivers.forEach(driver => {
                    const row = document.querySelector(`tr[data-driver="${driver.name}"]`);
                    if (row) row.classList.add('selected');
                });
                
                // Zv√Ωraznƒõn√≠ ≈ô√°dku s vybran√Ωm t√Ωmem
                if (selectedTeam) {
                    const row = document.querySelector(`tr[data-team="${selectedTeam.name}"]`);
                    if (row) row.classList.add('selected');
                }
            }
            
            // P≈ôid√°n√≠ scrollTop funkcionalitu
            scrollTopButton.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
            
            // P≈ôid√°n√≠ listener≈Ø na checkboxy jezdc≈Ø
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const name = this.getAttribute('data-name');
                    // Zajist√≠me, ≈æe price je v≈ædy ƒç√≠slo
                    const price = parseFloat(this.getAttribute('data-price') || 0);
                    const flag = this.getAttribute('data-flag');
                    
                    if (this.checked) {
                        // Kontrola limitu poƒçtu jezdc≈Ø
                        if (selectedDrivers.length >= 5) {
                            this.checked = false;
                            alert('M≈Ø≈æete vybrat maxim√°lnƒõ 5 jezdc≈Ø!');
                            return;
                        }
                        
                        // P≈ôidat jezdce - ujist√≠me se, ≈æe cena je ƒç√≠slo
                        selectedDrivers.push({ name, price: Number(price), flag });
                    } else {
                        // Odebrat jezdce
                        selectedDrivers = selectedDrivers.filter(driver => driver.name !== name);
                    }
                    
                    // Aktualizovat zobrazen√≠
                    updateDisplay();
                    // Aktualizace zv√Ωraznƒõn√≠ ≈ô√°dk≈Ø
                    updateSelectedRows();
                });
            });
            
            // P≈ôid√°n√≠ listener≈Ø na radiobuttony t√Ωm≈Ø
            radioButtons.forEach(radio => {
                radio.addEventListener('change', function() {
                    const name = this.getAttribute('data-name');
                    // Zajist√≠me, ≈æe price je v≈ædy ƒç√≠slo
                    const price = parseFloat(this.getAttribute('data-price') || 0);
                    const flag = this.getAttribute('data-flag');
                    
                    // Nastavit vybran√Ω t√Ωm - ujist√≠me se, ≈æe cena je ƒç√≠slo
                    selectedTeam = { name, price: Number(price), flag };
                    
                    // Aktualizovat zobrazen√≠
                    updateDisplay();
                    // Aktualizace zv√Ωraznƒõn√≠ ≈ô√°dk≈Ø
                    updateSelectedRows();
                });
            });
            
            // P≈ôid√°n√≠ listeneru na tlaƒç√≠tko reset
            resetButton.addEventListener('click', function() {
                // Odznaƒçit v≈°echny checkboxy
                checkboxes.forEach(checkbox => {
                    checkbox.checked = false;
                });
                
                // Odznaƒçit v≈°echny radiobuttony
                radioButtons.forEach(radio => {
                    radio.checked = false;
                });
                
                // Resetovat data
                selectedDrivers = [];
                selectedTeam = null;
                
                // Aktualizovat zobrazen√≠
                updateDisplay();
                // Aktualizace zv√Ωraznƒõn√≠ ≈ô√°dk≈Ø
                updateSelectedRows();
            });
            
            // P≈ôid√°n√≠ listeneru na tlaƒç√≠tko n√°hledu - POUZE p≈ôi kliknut√≠
            previewButton.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                showPreview();
            });
            
            // P≈ôid√°n√≠ listeneru na zav≈ôen√≠ n√°hledu
            previewClose.addEventListener('click', function() {
                previewContainer.style.display = 'none';
            });
            
            // Zav≈ôen√≠ n√°hledu kliknut√≠m mimo obsah
            previewContainer.addEventListener('click', function(e) {
                if (e.target === previewContainer) {
                    previewContainer.style.display = 'none';
                }
            });
            
            // Funkce pro v√Ωpoƒçet celkov√© ceny jezdc≈Ø
            function calculateDriversTotal() {
                let total = 0;
                for (let i = 0; i < selectedDrivers.length; i++) {
                    const price = Number(selectedDrivers[i].price);
                    if (!isNaN(price)) {
                        total += price;
                    }
                }
                return total;
            }
            
            // Funkce pro aktualizaci zobrazen√≠
            function updateDisplay() {
                // V√Ωpoƒçet rozpoƒçtu
                const driversTotal = calculateDriversTotal();
                const teamTotal = selectedTeam ? Number(selectedTeam.price) : 0;
                const totalCost = driversTotal + teamTotal;
                const remainingBudget = BUDGET_LIMIT - totalCost;
                
                // Aktualizace rozpoƒçtu v UI
                usedBudgetElement.textContent = `${totalCost.toFixed(1)} mil.`;
                remainingBudgetElement.textContent = `${remainingBudget.toFixed(1)} mil.`;
                
                // Aktualizace fixn√≠ho panelu s rozpoƒçtem
                fixedUsedBudgetElement.textContent = `${totalCost.toFixed(1)} mil.`;
                fixedRemainingBudgetElement.textContent = `${remainingBudget.toFixed(1)} mil.`;
                
                // Aktualizace progress baru
                const progressPercentage = (totalCost / BUDGET_LIMIT) * 100;
                progressBarElement.style.width = `${Math.min(progressPercentage, 100)}%`;
                progressBarElement.textContent = `${Math.min(progressPercentage, 100).toFixed(0)}%`;
                
                // Zmƒõna barvy progress baru
                if (progressPercentage > 100) {
                    progressBarElement.style.backgroundColor = '#d32f2f';
                } else if (progressPercentage > 90) {
                    progressBarElement.style.backgroundColor = '#ff9800';
                } else {
                    progressBarElement.style.backgroundColor = '#e10600';
                }
                
                // Aktualizace stavov√© zpr√°vy a tlaƒç√≠tka n√°hledu
                if (totalCost > BUDGET_LIMIT) {
                    statusMessageElement.textContent = 'P≈ôekroƒçili jste rozpoƒçet!';
                    statusMessageElement.className = 'error';
                    previewButton.disabled = true;
                } else if (selectedDrivers.length === 5 && selectedTeam) {
                    statusMessageElement.textContent = 'V√°≈° v√Ωbƒõr je kompletn√≠ a v r√°mci rozpoƒçtu!';
                    statusMessageElement.className = 'success';
                    previewButton.disabled = false;
                } else {
                    statusMessageElement.textContent = '';
                    statusMessageElement.className = '';
                    previewButton.disabled = true;
                }
                
                // Aktualizace karet jezdc≈Ø s fotkami na pozad√≠
                selectedDriversElement.innerHTML = '';
                
                if (selectedDrivers.length === 0) {
                    selectedDriversElement.innerHTML = '<p>Zat√≠m jste nevybrali ≈æ√°dn√© jezdce.</p>';
                } else {
                    selectedDrivers.forEach((driver, index) => {
                        selectedDriversElement.innerHTML += createDriverCard(driver, index);
                    });
                }
                
                // Aktualizace karty t√Ωmu s fotkou auta na pozad√≠
                selectedTeamElement.innerHTML = '';
                
                if (selectedTeam) {
                    selectedTeamElement.innerHTML = createTeamCard(selectedTeam);
                } else {
                    selectedTeamElement.innerHTML = '<p>Zat√≠m jste nevybrali ≈æ√°dn√Ω t√Ωm.</p>';
                }
            }
            
            // Funkce pro zobrazen√≠ n√°hledu - OPRAVEN√Å s vylep≈°en√Ωmi kartami
            function showPreview() {
                // Kontrola, zda je sestava kompletn√≠
                if (selectedDrivers.length !== 5 || !selectedTeam) {
                    alert('Pro zobrazen√≠ n√°hledu mus√≠te vybrat 5 jezdc≈Ø a 1 t√Ωm.');
                    return;
                }
                
                // V√Ωpoƒçet rozpoƒçtu
                const driversTotal = calculateDriversTotal();
                const teamTotal = Number(selectedTeam.price);
                const totalCost = driversTotal + teamTotal;
                const remainingBudget = BUDGET_LIMIT - totalCost;
                
                // VYLEP≈†EN√â KARTY JEZDC≈Æ - ≈°ir≈°√≠, ni≈æ≈°√≠, lep≈°√≠ ƒçitelnost
                const previewDriversElement = document.getElementById('preview-drivers');
                previewDriversElement.innerHTML = '';
                
                selectedDrivers.forEach(driver => {
                    const photoUrl = driverPhotos[driver.name];
                    const cardHTML = `
                        <div class="preview-card" style="background-image: url('${photoUrl}');">
                            <div class="preview-card-content">
                                <div class="driver-name">${driver.name}</div>
                                <div class="price-tag">${Number(driver.price).toFixed(1)} mil.</div>
                            </div>
                        </div>
                    `;
                    previewDriversElement.innerHTML += cardHTML;
                });
                
                // VYLEP≈†EN√â KARTY T√ùM≈Æ - ≈°ir≈°√≠, ni≈æ≈°√≠, lep≈°√≠ ƒçitelnost
                const previewTeamElement = document.getElementById('preview-team');
                previewTeamElement.innerHTML = '';
                
                const carUrl = teamCars[selectedTeam.name];
                const teamCardHTML = `
                    <div class="preview-card" style="background-image: url('${carUrl}');">
                        <div class="preview-card-content">
                            <div class="driver-name">${selectedTeam.name}</div>
                            <div class="price-tag">${Number(selectedTeam.price).toFixed(1)} mil.</div>
                        </div>
                    </div>
                `;
                previewTeamElement.innerHTML += teamCardHTML;
                
                // P≈òID√ÅN√ç KARTY S CELKOV√ùMI N√ÅKLADY - F1 STYL
                const totalCostCardHTML = `
                    <div class="preview-card f1-total-card" style="background: linear-gradient(135deg, #000000 0%, #1a0000 50%, #cc0000 100%); border: 3px solid #ff0000; box-shadow: 0 0 20px rgba(255, 0, 0, 0.4), 0 4px 16px rgba(0,0,0,0.3);">
                        <div class="preview-card-content" style="background: none; justify-content: center; text-align: center;">
                            <div style="font-family: 'Orbitron', 'Exo 2', monospace; font-size: 1.3em; font-weight: 900; margin-bottom: 8px; color: #ffffff; text-transform: uppercase; letter-spacing: 3px; text-shadow: 0 0 10px rgba(255, 0, 0, 0.8);">CELKEM</div>
                            <div style="font-family: 'Orbitron', 'Exo 2', monospace; font-size: 2.8em; font-weight: 900; color: #ff0000 !important; text-shadow: 0 0 15px rgba(255, 0, 0, 0.9), 0 2px 8px rgba(0,0,0,0.8); letter-spacing: 2px; text-transform: uppercase;">${totalCost.toFixed(1)} MIL</div>
                        </div>
                    </div>
                `;
                previewTeamElement.innerHTML += totalCostCardHTML;
                
                // Aktualizace rozpoƒçtu v n√°hledu
                document.getElementById('preview-used').textContent = `${totalCost.toFixed(1)} mil.`;
                document.getElementById('preview-remaining').textContent = `${remainingBudget.toFixed(1)} mil.`;
                
                // Zobrazen√≠ n√°hledu
                previewContainer.style.display = 'block';
            }
            
            // Inicializace - ZAJISTIT ≈æe n√°hled je skryt√Ω
            updateDisplay();
            updateSelectedRows();
            
            // Explicitnƒõ skr√Ωt n√°hled p≈ôi naƒçten√≠
            previewContainer.style.display = 'none';
            
            // FANTASY STATISTIKY - Event listener pro tlaƒç√≠tko statistik
            const statsButton = document.getElementById('stats-button');
            const statsModal = document.getElementById('stats-modal');
            const statsLoading = document.getElementById('stats-loading');
            const statsContent = document.getElementById('stats-content');
            
            // Tab handler
            document.getElementById('tab-drivers').onclick = function() {
                this.classList.add('active');
                document.getElementById('tab-teams').classList.remove('active');
                document.getElementById('stats-tab-drivers').style.display = '';
                document.getElementById('stats-tab-teams').style.display = 'none';
            };
            document.getElementById('tab-teams').onclick = function() {
                this.classList.add('active');
                document.getElementById('tab-drivers').classList.remove('active');
                document.getElementById('stats-tab-drivers').style.display = 'none';
                document.getElementById('stats-tab-teams').style.display = '';
            };
            
            statsButton.addEventListener('click', function() {
                // Zobraz modal a loading
                statsModal.style.display = 'block';
                statsLoading.style.display = 'block';
                statsContent.style.display = 'none';
                statsLoading.textContent = 'üèéÔ∏è Naƒç√≠t√°m v√Ωsledky cel√© sez√≥ny...';
                
                // Naƒçte v≈°echny z√°vody a v√Ωsledky SEZ√ìNY, kter√° bƒõ≈æ√≠ (automaticky 2025, pokud jsi na /current/)
                Promise.all([
                    fetch('https://ergast.com/api/f1/current/results.json').then(res => res.json()),
                    fetch('https://ergast.com/api/f1/current/qualifying.json').then(res => res.json())
                ]).then(([raceData, qualiData]) => {
                    // Skryj loading, zobraz obsah
                    statsLoading.style.display = 'none';
                    statsContent.style.display = 'block';
                    
                    // V≈°echny z√°vody v sez√≥nƒõ
                    const races = raceData.MRData.RaceTable.Races;
                    const qualis = qualiData.MRData.RaceTable.Races;

                    // Najdi pole position pro ka≈æd√Ω z√°vod
                    const poleDriverByRound = {};
                    qualis.forEach(qrace => {
                        const pole = qrace.QualifyingResults?.find(q => q.position == "1");
                        if (pole) poleDriverByRound[qrace.round] = pole.Driver.driverId;
                    });

                    // Simulace Driver of the Day ‚Äì m≈Ø≈æe≈° doplnit ruƒçnƒõ p≈ôes objekt nap≈ô. {'6': 'norris'}
                    const driverOfTheDayPerRound = {};

                    // Funkce na bodov√°n√≠
                    function getPositionPoints(pos) {
                        const map = [30, 25, 21, 18, 15, 12, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1];
                        return map[pos - 1] || 0;
                    }

                    // Sestav fantasy body jezdc≈Ø
                    let driversSet = new Set();
                    let teamsSet = new Set();
                    let driverPoints = {};
                    let teamPoints = {};

                    races.forEach(race => {
                        const round = race.round;
                        (race.Results || []).forEach(result => {
                            const d = result.Driver;
                            const driverId = d.driverId;
                            const name = `${d.givenName} ${d.familyName}`;
                            const team = result.Constructor.name;
                            const pos = Number(result.position);
                            const grid = Number(result.grid);
                            const status = result.status?.toLowerCase() || "";
                            let points = 0;

                            // Um√≠stƒõn√≠
                            points += getPositionPoints(pos);

                            // Penalizace
                            if(status.includes('disqual')) points -= 20;
                            else if(status.includes('did not start')) points -= 10;
                            else if(status && status !== "finished" && !status.includes('+')) points -= 10;

                            // Zlep≈°en√≠/zhor≈°en√≠
                            if(grid && pos) points += (grid - pos);

                            // Fastest lap
                            if(result.FastestLap && result.FastestLap.rank === "1") points += 5;

                            // Pole position
                            if(driverId === poleDriverByRound[round]) points += 5;

                            // Driver of the Day
                            if(driverOfTheDayPerRound[round] === driverId) points += 5;

                            // Ulo≈æ
                            if(!driverPoints[driverId]) driverPoints[driverId] = {name, team, points: [], driverId};
                            driverPoints[driverId].points[round-1] = points;
                            driversSet.add(driverId);

                            // T√Ωmy
                            if(!teamPoints[team]) teamPoints[team] = [];
                            if(!teamPoints[team][round-1]) teamPoints[team][round-1] = [];
                            teamPoints[team][round-1].push(points);
                            teamsSet.add(team);
                        });
                    });

                    // Pr≈Ømƒõr pro t√Ωmy
                    let teamAverages = {};
                    Array.from(teamsSet).forEach(team => {
                        teamAverages[team] = [];
                        for(let i=0; i<races.length; ++i){
                            const arr = (teamPoints[team][i] || []);
                            const avg = arr.length ? arr.reduce((a, b) => a+b, 0)/arr.length : 0;
                            teamAverages[team][i] = Math.round(avg*100)/100;
                        }
                    });

                    // === Tabulka jezdc≈Ø ===
                    const thead = document.querySelector('#fantasy-drivers-table thead');
                    let th = '<tr><th>Jezdec</th>';
                    races.forEach(race => th += `<th style="min-width: 80px;">${race.raceName.replace(' Grand Prix', '')}</th>`);
                    th += '<th style="background-color: #e10600;">Celkem</th></tr>';
                    thead.innerHTML = th;

                    const tbody = document.querySelector('#fantasy-drivers-table tbody');
                    tbody.innerHTML = '';
                    
                    // Se≈ôaƒè jezdce podle celkov√Ωch bod≈Ø
                    const sortedDrivers = Object.values(driverPoints).sort((a, b) => {
                        const sumA = a.points.reduce((sum, pts) => sum + (pts || 0), 0);
                        const sumB = b.points.reduce((sum, pts) => sum + (pts || 0), 0);
                        return sumB - sumA;
                    });
                    
                    sortedDrivers.forEach((drv, index) => {
                        let tr = `<tr${index < 3 ? ' style="background-color: #fff9e6;"' : ''}><td>${drv.name}</td>`;
                        let sum = 0;
                        for(let i=0;i<races.length;++i){
                            const pts = drv.points[i] ?? '';
                            tr += `<td>${pts}</td>`;
                            sum += Number(pts) || 0;
                        }
                        tr += `<td><b>${sum}</b></td></tr>`;
                        tbody.innerHTML += tr;
                    });

                    // === Tabulka t√Ωm≈Ø ===
                    const theadT = document.querySelector('#fantasy-teams-table thead');
                    let thT = '<tr><th>T√Ωm</th>';
                    races.forEach(race => thT += `<th style="min-width: 80px;">${race.raceName.replace(' Grand Prix', '')}</th>`);
                    thT += '<th style="background-color: #e10600;">Celkem</th></tr>';
                    theadT.innerHTML = thT;

                    const tbodyT = document.querySelector('#fantasy-teams-table tbody');
                    tbodyT.innerHTML = '';
                    
                    // Se≈ôaƒè t√Ωmy podle celkov√Ωch bod≈Ø
                    const sortedTeams = Object.entries(teamAverages).sort((a, b) => {
                        const sumA = a[1].reduce((sum, pts) => sum + (pts || 0), 0);
                        const sumB = b[1].reduce((sum, pts) => sum + (pts || 0), 0);
                        return sumB - sumA;
                    });
                    
                    sortedTeams.forEach(([team, avgs], index) => {
                        let tr = `<tr${index < 3 ? ' style="background-color: #fff9e6;"' : ''}><td>${team}</td>`;
                        let sum = 0;
                        for(let i=0;i<races.length;++i){
                            const pts = avgs[i] ?? '';
                            tr += `<td>${pts}</td>`;
                            sum += Number(pts) || 0;
                        }
                        tr += `<td><b>${Math.round(sum*100)/100}</b></td></tr>`;
                        tbodyT.innerHTML += tr;
                    });

                    // === Grafy ===
                    // Graf JEZDCI
                    const chartColors = [
                      "#e10600", "#0072ce", "#ff8700", "#16a34a", "#ffea00", "#1a1a1a", "#e70043", "#00c2b4", "#9440ff", "#0fbcf9",
                      "#aa00ff", "#b19cd9", "#ffd600", "#c51162", "#2962ff", "#43a047", "#6d4c41", "#bf360c", "#304ffe", "#f57c00"
                    ];
                    
                    const ctx = document.getElementById('drivers-chart').getContext('2d');
                    if(window.driversChart) window.driversChart.destroy();
                    window.driversChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: races.map(r => r.raceName.replace(' Grand Prix', '')),
                            datasets: sortedDrivers.slice(0, 10).map((drv,idx) => {
                                // Kumulativn√≠ suma
                                let data = [];
                                let sum = 0;
                                for(let i=0;i<races.length;++i){
                                    sum += drv.points[i] || 0;
                                    data.push(sum);
                                }
                                return {
                                    label: drv.name,
                                    data,
                                    borderColor: chartColors[idx % chartColors.length],
                                    backgroundColor: chartColors[idx % chartColors.length]+"33",
                                    tension: 0.3,
                                    pointRadius: 4,
                                    borderWidth: 2
                                };
                            })
                        },
                        options: {
                            plugins: {
                                legend: { 
                                    display: true,
                                    position: 'bottom',
                                    labels: {
                                        usePointStyle: true,
                                        padding: 15
                                    }
                                }
                            },
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: { 
                                y: { 
                                    beginAtZero: true,
                                    grid: {
                                        color: '#f0f0f0'
                                    }
                                },
                                x: {
                                    grid: {
                                        color: '#f0f0f0'
                                    }
                                }
                            }
                        }
                    });

                    // Graf T√ùMY
                    const ctxT = document.getElementById('teams-chart').getContext('2d');
                    if(window.teamsChart) window.teamsChart.destroy();
                    window.teamsChart = new Chart(ctxT, {
                        type: 'line',
                        data: {
                            labels: races.map(r => r.raceName.replace(' Grand Prix', '')),
                            datasets: sortedTeams.map(([team,avgs],idx) => {
                                // Kumulativn√≠ suma
                                let data = [];
                                let sum = 0;
                                for(let i=0;i<races.length;++i){
                                    sum += avgs[i] || 0;
                                    data.push(Math.round(sum*100)/100);
                                }
                                return {
                                    label: team,
                                    data,
                                    borderColor: chartColors[idx % chartColors.length],
                                    backgroundColor: chartColors[idx % chartColors.length]+"33",
                                    tension: 0.3,
                                    pointRadius: 4,
                                    borderWidth: 2
                                };
                            })
                        },
                        options: {
                            plugins: {
                                legend: { 
                                    display: true,
                                    position: 'bottom',
                                    labels: {
                                        usePointStyle: true,
                                        padding: 15
                                    }
                                }
                            },
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: { 
                                y: { 
                                    beginAtZero: true,
                                    grid: {
                                        color: '#f0f0f0'
                                    }
                                },
                                x: {
                                    grid: {
                                        color: '#f0f0f0'
                                    }
                                }
                            }
                        }
                    });
                    
                }).catch(error => {
                    console.error('Chyba p≈ôi naƒç√≠t√°n√≠ dat:', error);
                    statsLoading.innerHTML = '‚ùå Chyba p≈ôi naƒç√≠t√°n√≠ dat. Zkuste to pozdƒõji.';
                });
            });
        });
    </script>
</body>
</html> = 'block';
                    
                    // Zpracov√°n√≠ dat
                    const race = raceData.MRData.RaceTable.Races[0];
                    const results = race.Results;
                    const quali = qualiData.MRData.RaceTable.Races[0].QualifyingResults;
                    
                    // Najdi pole position (pozice 1 v kvalifikaci)
                    let poleDriverId = null;
                    if (quali && quali.length) {
                        poleDriverId = quali.find(q => q.position == "1")?.Driver.driverId;
                    }
                    
                    // Simulace Driver of the Day (v budoucnu lze roz≈°√≠≈ôit)
                    const driverOfTheDay = "norris"; // Zat√≠m ruƒçnƒõ, lze roz≈°√≠≈ôit
                    
                    // Bodovac√≠ tabulka podle um√≠stƒõn√≠
                    function getPositionPoints(pos) {
                        const pointsMap = [30, 25, 21, 18, 15, 12, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1];
                        return pointsMap[pos - 1] || 0;
                    }
                    
                    // V√Ωpoƒçet fantasy bod≈Ø pro ka≈æd√©ho jezdce
                    const fantasyDrivers = results.map(result => {
                        const driver = result.Driver;
                        const driverId = driver.driverId;
                        const name = `${driver.givenName} ${driver.familyName}`;
                        const team = result.Constructor.name;
                        const finishPosition = Number(result.position);
                        const gridPosition = Number(result.grid);
                        const status = result.status.toLowerCase();
                        
                        let totalPoints = 0;
                        let pointsDetail = [];
                        
                        // 1. Body za um√≠stƒõn√≠ v c√≠li
                        const positionPoints = getPositionPoints(finishPosition);
                        totalPoints += positionPoints;
                        pointsDetail.push(`${finishPosition}. m√≠sto = ${positionPoints}b`);
                        
                        // 2. Penalizace za DNF, DNS, DSQ
                        if (status.includes('disqualified')) {
                            totalPoints -= 20;
                            pointsDetail.push(`DSQ = -20b`);
                        } else if (status.includes('did not start')) {
                            totalPoints -= 10;
                            pointsDetail.push(`DNS = -10b`);
                        } else if (status !== "finished" && !status.includes('+')) {
                            totalPoints -= 10;
                            pointsDetail.push(`DNF = -10b`);
                        }
                        
                        // 3. Body za zlep≈°en√≠/zhor≈°en√≠ pozice oproti startu
                        const positionChange = gridPosition - finishPosition;
                        if (positionChange !== 0) {
                            totalPoints += positionChange;
                            if (positionChange > 0) {
                                pointsDetail.push(`Zlep≈°en√≠ o ${positionChange} m√≠st = +${positionChange}b`);
                            } else {
                                pointsDetail.push(`Zhor≈°en√≠ o ${Math.abs(positionChange)} m√≠st = ${positionChange}b`);
                            }
                        }
                        
                        // 4. Fastest Lap bonus
                        if (result.FastestLap && result.FastestLap.rank === "1") {
                            totalPoints += 5;
                            pointsDetail.push("Fastest Lap = +5b");
                        }
                        
                        // 5. Pole Position bonus
                        if (driverId === poleDriverId) {
                            totalPoints += 5;
                            pointsDetail.push("Pole Position = +5b");
                        }
                        
                        // 6. Driver of the Day bonus
                        if (driverId === driverOfTheDay) {
                            totalPoints += 5;
                            pointsDetail.push("Driver of the Day = +5b");
                        }
                        
                        return {
                            name,
                            driverId,
                            team,
                            points: totalPoints,
                            detail: pointsDetail.join(', ')
                        };
                    });
                    
                    // Se≈ôazen√≠ jezdc≈Ø podle fantasy bod≈Ø (sestupnƒõ)
                    fantasyDrivers.sort((a, b) => b.points - a.points);
                    
                    // Zobrazen√≠ tabulky jezdc≈Ø
                    const driversTableBody = document.querySelector('#fantasy-drivers-table tbody');
                    driversTableBody.innerHTML = '';
                    fantasyDrivers.forEach((driver, index) => {
                        const row = document.createElement('tr');
                        row.style.borderBottom = '1px solid #eee';
                        if (index < 3) {
                            row.style.backgroundColor = '#fff9e6'; // Zv√Ωraznƒõn√≠ top 3
                        }
                        row.innerHTML = `
                            <td style="padding: 12px 15px; font-weight: bold; color: #e10600;">${index + 1}</td>
                            <td style="padding: 12px 15px;">${driver.name}</td>
                            <td style="padding: 12px 15px;">${driver.team}</td>
                            <td style="padding: 12px 15px; font-weight: bold; font-size: 1.1em; color: #15151e;">${driver.points}</td>
                            <td style="padding: 12px 15px; font-size: 0.9em; color: #666;">${driver.detail}</td>
                        `;
                        driversTableBody.appendChild(row);
                    });
                    
                    // V√Ωpoƒçet bod≈Ø pro konstrukt√©ry (pr≈Ømƒõr bod≈Ø jezdc≈Ø t√Ωmu)
                    const teamMap = {};
                    fantasyDrivers.forEach(driver => {
                        if (!teamMap[driver.team]) {
                            teamMap[driver.team] = [];
                        }
                        teamMap[driver.team].push(driver.points);
                    });
                    
                    const fantasyTeams = [];
                    for (const teamName in teamMap) {
                        const teamPoints = teamMap[teamName];
                        const averagePoints = teamPoints.reduce((sum, points) => sum + points, 0) / teamPoints.length;
                        fantasyTeams.push({
                            team: teamName,
                            averagePoints: Math.round(averagePoints * 100) / 100
                        });
                    }
                    
                    // Se≈ôazen√≠ t√Ωm≈Ø podle pr≈Ømƒõrn√Ωch bod≈Ø (sestupnƒõ)
                    fantasyTeams.sort((a, b) => b.averagePoints - a.averagePoints);
                    
                    // Zobrazen√≠ tabulky t√Ωm≈Ø
                    const teamsTableBody = document.querySelector('#fantasy-teams-table tbody');
                    teamsTableBody.innerHTML = '';
                    fantasyTeams.forEach((team, index) => {
                        const row = document.createElement('tr');
                        row.style.borderBottom = '1px solid #eee';
                        if (index < 3) {
                            row.style.backgroundColor = '#fff9e6'; // Zv√Ωraznƒõn√≠ top 3
                        }
                        row.innerHTML = `
                            <td style="padding: 12px 15px; font-weight: bold; color: #e10600;">${index + 1}</td>
                            <td style="padding: 12px 15px;">${team.team}</td>
                            <td style="padding: 12px 15px; font-weight: bold; font-size: 1.1em; color: #15151e;">${team.averagePoints}</td>
                        `;
                        teamsTableBody.appendChild(row);
                    });
                    
                }).catch(error => {
                    console.error('Chyba p≈ôi naƒç√≠t√°n√≠ dat:', error);
                    statsLoading.innerHTML = '‚ùå Chyba p≈ôi naƒç√≠t√°n√≠ dat. Zkuste to pozdƒõji.';
                });
            });
        });
    </script>
</body>
</html>
